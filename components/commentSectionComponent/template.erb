<% @current_comments.each do |comment| %>
  <div class="ml-4 mb-4 p-4 border-l-4 border-gray-300 bg-white dark:bg-gray-800 dark:border-gray-600 rounded-lg shadow-sm">
    <!-- Comment Content -->
    <div>
      <p class="font-semibold text-gray-900 dark:text-gray-200">User <%= comment["user_id"] %></p>
      <p class="text-gray-700 dark:text-gray-300"><%= comment["comment_text"] %></p>
      <p class="text-sm text-gray-500 dark:text-gray-400">Posted at: <%= comment["created_at"] %></p>
    </div>

    <!-- Add Reply Form -->
    <%= CommentFormComponent(@post, comment["comment_id"]) %>

    <!-- Recursively Render Replies -->
    <% if @comments[comment["comment_id"]] && !@current_comments.empty? && comment["comment_id"] != nil && @depth < 4 %>
      <%= CommentSectionComponent(@post, @comments, comment["comment_id"], @depth + 1) %>
    <% end %>
  </div>
<% end %>
